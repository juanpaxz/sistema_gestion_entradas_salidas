{% extends 'control/base.html' %}

{% load static %}

{% block title %}Dashboard - Administrador{% endblock %}

{% block content %}
<div class="container">
  <div class="row mb-4">
    <div class="col-12">
      <div class="d-flex align-items-center justify-content-between">
        <div>
          <h2 class="mb-0">Dashboard</h2>
          <p class="text-muted mb-0">Resumen r치pido del estado del sistema</p>
        </div>
        <div><!-- button moved into Empleados card -->
        </div>
      </div>
    </div>
  </div>

  <div class="row g-3">

    <div class="col-md-4">
      <div class="card shadow-sm stat-card stat-card-primary">
        <div class="card-body">
          <h5 class="card-title">Empleados</h5>
          <p class="display-6 mb-0 stat-value">{{ total_empleados }}</p>
          <small class="text-muted">Total de empleados registrados</small>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card shadow-sm stat-card stat-card-green">
        <div class="card-body">
          <h5 class="card-title">Activos</h5>
          <p class="display-6 mb-0 stat-value">{{ empleados_activos }}</p>
          <small class="text-muted">Empleados con estado "activo"</small>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card shadow-sm stat-card stat-card-danger">
        <div class="card-body">
          <h5 class="card-title">Agregar empleado</h5>
          <p class="mb-2 text-muted">Registrar un nuevo empleado en el sistema</p>
          <a href="{% url 'control:crear' %}" class="btn btn-light text-danger fw-bold">Agregar empleado</a>
        </div>
      </div>
    </div>
  </div>

  <div class="row mt-4">
    <div class="col-md-6">
      <div class="card shadow-sm">
        <div class="card-body">
          <h5 class="card-title">游늶 Validar Justificantes</h5>
          <p class="text-muted">Revisa y valida los justificantes de retardo que los empleados han subido.</p>
          <a href="{% url 'control:validar_justificantes' %}" class="btn btn-warning">
            Ir al Panel de Validaci칩n
          </a>
        </div>
      </div>
    </div>

    <div class="col-md-6">
      <div class="card shadow-sm">
        <div class="card-body">
          <h5 class="card-title">游늵 Reporte de Asistencias</h5>
          <p class="text-muted">Consulta reportes detallados de asistencias y filtra por empleado, fecha y tipo.</p>
          <a href="{% url 'control:reporte_asistencias' %}" class="btn btn-info">
            Ver Reporte
          </a>
        </div>
      </div>
    </div>
  </div>

  <div class="row mt-4">
    <div class="col-md-6">
      <div class="card shadow-sm">
        <div class="card-body">
          <h5 class="card-title">丘뙖잺 Configuraci칩n r치pida</h5>
          <p class="text-muted">Define cu치ntos minutos de diferencia se consideran retardo al registrar la entrada.</p>
          <form method="post" class="row g-2 align-items-center">
            {% csrf_token %}
            <div class="col-auto">
              <label for="retardo_minutos" class="col-form-label">Minutos de tolerancia</label>
            </div>
            <div class="col-auto">
              <input type="number" min="0" step="1" class="form-control" id="retardo_minutos" name="retardo_minutos" value="{{ retardo_minutos|default:5 }}">
            </div>
            <div class="col-auto">
              <button type="submit" class="btn btn-primary">Guardar</button>
            </div>
          </form>
          <div class="mt-2 small text-muted">Actualmente: <strong>{{ retardo_minutos|default:5 }} minutos</strong></div>
        </div>
      </div>
    </div>
  </div>

  <div class="row mt-4">
    <div class="col-12">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">칔ltimas incidencias</h5>
          <p class="text-muted">(Aqu칤 se mostrar치 una lista de incidencias en futuras iteraciones)</p>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
