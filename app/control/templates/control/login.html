{% extends 'control/bootstrap_base.html' %}
{% load static %}

{% block title %}Iniciar sesión{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'control/css/theme.css' %}">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

<style>
    .kiosk-container {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 1rem;
    }

    /* Logo grande */
    .brand-logo-lg {
        width: 70px;
        height: 70px;
        font-size: 2rem;
        border-radius: 14px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 1rem; 
    }
    
    @media (max-width: 576px) {
        #current-time { font-size: 3.5rem; }
        #current-date { font-size: 1.15rem; }
    }

    /* Estilo del formulario de login */
    .login-form {
        max-width: 420px; /* Ancho del login.html original */
        width: 100%;
        background-color: #fff;
        padding: 2rem; /* Un poco más de espacio para los labels */
        border-radius: 12px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.08);
        border: 1px solid #e0e0e0;
    }
    
    .login-form .form-label {
        font-weight: 600;
        margin-bottom: 0.25rem;
    }

    /* --- Estilos para los campos de Django --- */
    .login-form input[type="text"],
    .login-form input[type="password"] {
        width: 100%;
        padding: 0.75rem 1rem;
        border: 2px solid #f4f7f6;
        border-radius: 6px;
        box-shadow: none;
        outline: none;
        transition: box-shadow .15s ease, border-color .15s ease;
        font-size: 1rem;
        line-height: 1.5;
        background-color: #f4f7f6;
    }
    .login-form input:focus {
        /* Enfoque: color de borde reemplazado (antes azul) */
        border-color: #c70f02;
        /* Sombra suave usando versión translúcida del nuevo color */
        box-shadow: 0 0 0 0.15rem rgba(199, 15, 2, 0.12);
    }
    /* Botón principal: usar color sólido para mejor contraste
       Antes se usó un hex de 8 dígitos (`#c70f0285`) que incluye un canal alpha
       — eso hace el fondo semitransparente y provoca el aspecto opaco. */
    #btn-ingresar {
        /* Color sólido (sin transparencia) */
        background-color: #c70f02 !important;
        /* Texto blanco para buen contraste sobre el fondo rojo */
        color: #ffffff !important;
        /* Borde ligeramente más oscuro que el fondo */
        border-color: #b80d02 !important;
        padding-top: 0.7rem;
        padding-bottom: 0.7rem;
        font-size: 1.1rem;
        font-weight: 600;
        /* Sombra sutil para que resalte sobre el fondo blanco */
        box-shadow: 0 4px 10px rgba(199,15,2,0.12);
    }

</style>
{% endblock %}

{% block content %}


<div class="kiosk-container">

    <div class="brand-logo-lg">
           <img src="{% static 'control/img/logo.jpg' %}" alt="Logo" style="width:100%; height:100%; object-fit:contain; border-radius:12px; display:block;">
    </div>

    <!-- Título principal: color cambiado de azul a nuevo color solicitado -->
    <div class="title" style="color: #c70f02; font-weight: 1000; font-size: 1.5rem; margin-bottom: 1rem;">
        Escuela del Servicio Social
    </div>

    <div class="login-form">
        {% if form.non_field_errors %}
            <div class="alert alert-danger" style="padding: 0.75rem 1rem; font-size: 0.9rem;">
                {{ form.non_field_errors|striptags }}
            </div>
        {% endif %}

        <form method="post" novalidate>
            {% csrf_token %}
            {% if next %}
                <input type="hidden" name="next" value="{{ next }}">
            {% elif request.GET.next %}
                <input type="hidden" name="next" value="{{ request.GET.next }}">
            {% endif %}

            <div class="mb-3 text-start">
                <label for="{{ form.username.id_for_label }}" class="form-label">Usuario</label>
                {{ form.username }}
                {% if form.username.errors %}
                    <div class="text-danger small mt-1">{{ form.username.errors|striptags }}</div>
                {% endif %}
            </div>

            <div class="mb-3 text-start">
                <label for="{{ form.password.id_for_label }}" class="form-label">Contraseña</label>
                {{ form.password }}
                {% if form.password.errors %}
                    <div class="text-danger small mt-1">{{ form.password.errors|striptags }}</div>
                {% endif %}
            </div>
            
            <div class="d-grid gap-3 mt-4">
                <button id="btn-ingresar" type="submit" class="btn btn-primary btn-lg">
                    <i class="bi bi-box-arrow-in-right"></i>
                    Ingresar
                </button>
            </div>

            <div class="text-center small text-muted mt-3">
                ¿No tienes cuenta? Contacta al administrador.
            </div>
        </form>
    </div>
</div>

{% endblock %}

{% block extra_js %}{% endblock %}