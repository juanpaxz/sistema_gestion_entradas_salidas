
{% extends 'control/bootstrap_base.html' %}

{% block title %}Iniciar sesión{% endblock %}

{% block content %}
<div class="d-flex justify-content-center align-items-center" style="min-height:70vh;">
  <div id="login-card" class="card shadow" style="width:420px; border-radius:12px; overflow:hidden;">
    <div style="background:linear-gradient(90deg,var(--brand-primary),#5aa5d9); padding:18px 24px; color:white;">
      <h4 class="mb-0">Control de Incidencias</h4>
      <small class="text-white-50">Acceso al sistema</small>
    </div>
    <div class="card-body p-4">
      {% if form.non_field_errors %}
        <div class="alert alert-danger">{{ form.non_field_errors }}</div>
      {% endif %}

      <form method="post" novalidate>
        {% csrf_token %}
        {% if next %}
          <input type="hidden" name="next" value="{{ next }}">
        {% elif request.GET.next %}
          <input type="hidden" name="next" value="{{ request.GET.next }}">
        {% endif %}

        <div class="mb-3">
          <label for="{{ form.username.id_for_label }}" class="form-label">Usuario</label>
          {{ form.username }}
          {% if form.username.errors %}
            <div class="text-danger small mt-1">{{ form.username.errors|striptags }}</div>
          {% endif %}
        </div>

        <div class="mb-3">
          <label for="{{ form.password.id_for_label }}" class="form-label">Contraseña</label>
          {{ form.password }}
          {% if form.password.errors %}
            <div class="text-danger small mt-1">{{ form.password.errors|striptags }}</div>
          {% endif %}
        </div>
        
        <button type="submit" class="btn btn-primary w-100 mb-2">Ingresar</button>

        <div class="text-center small text-muted">¿No tienes cuenta? Contacta al administrador.</div>
      </form>
    </div>
  </div>
</div>

<style>
  /* Style inputs generated by Django forms to look like Bootstrap form-control */
  #login-card input[type="text"],
  #login-card input[type="password"],
  #login-card input[type="email"] {
    width:100%;
    padding:0.5rem 0.75rem;
    border:1px solid #ddd;
    border-radius:6px;
    box-shadow:none;
    outline:none;
    transition:box-shadow .15s ease, border-color .15s ease;
  }
  #login-card input:focus{
    border-color: var(--bs-primary);
    box-shadow: 0 0 0 0.15rem rgba(45,139,210,0.15);
  }
  #login-card label.form-label{ font-weight:600; }
  #login-card .card-body{ background: #fff; }
</style>
{% endblock %}
